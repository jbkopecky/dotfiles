#!/bin/bash

# Script to set colors generated by 'wal'
# https://github.com/dylanaraps/wal

# Source generated colors.
source "${HOME}/.cache/wal/colors.sh"

get_args() { # {{{
    while getopts ":chi:o:qrt" opt; do
        case "$opt" in
            "r") reload="off";;
            "?")
                printf "%s\n" "Invalid option: -$OPTARG" >&2
                exit 1
            ;;
            ":")
                printf "%s\n" "Option -$OPTARG requires an argument." >&2
                exit 1
            ;;
        esac
    done
} #}}}

set_bar() { # {{{
    pkill bar
    bar "$color15" "$color0" 2>/dev/null &
} # }}}

set_openbox() { #{{{
    obco
} #}}}

reload_openbox() { # {{{
    echo "* Reloading Openbox"
    killall -USR2 openbox >&2
} # }}}

main() { # {{{
    get_args "$@"

    set_bar &
    
    set_openbox

    [[ "$reload" != "off" ]] &&  reload_openbox
} #}}}

main "$@"
